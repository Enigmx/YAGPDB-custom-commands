{{/* forum log modals */}}
{{$forumEraseLogChannel := 0}}
{{if eq .StrippedID "Rename"}}
{{if eq (len (index .Values 0)) 0}}
{{return}}
{{end}}
{{if not (getChannelOrThread (reFind `\d+` .Message.Content))}}
Seems like this channel doesn't exist anymore...
{{ephemeralResponse}}
{{return}}
{{end}}
{{/* editChannelName (toInt (reFind `\d+` .Message.Content)) (index .Values 0) */}}
{{$embed1 := structToSdict (index .Message.Embeds 0)}}
{{$embed1.Set "title" (index .Values 0)}}
{{if eq (len .Message.Embeds) 2}}
{{editMessage nil .Message.ID (complexMessageEdit "content" .Message.Content "embed" (cslice $embed1 (cembed "description" (print (structToSdict (index .Message.Embeds 1)).Description "\n\n<@" .User.ID "> Has changed the name of the post:\n" (index .Values 0)))))}}
{{else}}
{{editMessage nil .Message.ID (complexMessageEdit "content" .Message.Content "embed" (cslice $embed1 (cembed "description" (print "<@" .User.ID "> Has changed the name of the post:\n" (index .Values 0)))))}}
{{end}}
Done! Post has been renamed.
{{ephemeralResponse}}
{{return}}
{{end}}
{{if eq .StrippedID "Erase"}}
{{deleteForumPost (reFind `\d+` .Message.Content)}}
{{if not (eq (len (index .Values 0)) 0)}}
{{$user := getMember (index (reFindAll `\d+` .Message.Content) 1)}}
{{sendMessage $forumEraseLogChannel (complexMessage "content" (print "<@"  $user.User.ID "> Your post has been removed from the forums. The moderator gave the following reason:") "embed" (cembed "author" (sdict "name" ($user.User.Username) "icon_url" ($user.User.AvatarURL "512")) "description" (index .Values 0)))}}
{{if eq (len .Message.Embeds) 2}}
{{editMessage nil .Message.ID (complexMessageEdit "content" .Message.Content "embed" (cslice (index .Message.Embeds 0) (cembed "description" (print (structToSdict (index .Message.Embeds 1)).Description "\n\n<@" .User.ID "> Has removed the post for the following reason:\n" (index .Values 0)))))}}
{{else}}
{{editMessage nil .Message.ID (complexMessageEdit "content" .Message.Content "embed" (cslice (index .Message.Embeds 0) (cembed "description" (print "<@" .User.ID "> Has removed the post, no reason specified."))))}}
{{end}}
Done! Erased this post.
{{ephemeralResponse}}
{{return}}
{{end}}
Done! Erased this post.
{{ephemeralResponse}}
{{return}}
{{end}}
